import{a as c,b as l}from"./extraction-DvKe7Jqe.js";chrome.runtime.onMessage.addListener((r,a,o)=>{if(r.type==="PING")return o({type:"PONG"}),!0;if(r.type==="EXTRACT_CONTENT"){try{console.log("FlowReader: Extracting from",window.location.href),console.log("FlowReader: Document ready state:",document.readyState),console.log("FlowReader: Has documentElement:",!!document.documentElement),console.log("FlowReader: Has body:",!!document.body);const e=c(window.document,window.location.href);if(e)console.log("FlowReader: Extraction successful, blocks:",e.blocks.length),o({type:"CONTENT_EXTRACTED",payload:e});else{console.log("FlowReader: Extraction returned null, trying selection");const t=window.getSelection()?.toString();if(t&&t.length>100){const n=l(t,window.location.href);o({type:"CONTENT_EXTRACTED",payload:n})}else o({type:"EXTRACTION_FAILED",error:"Could not extract article content. Try selecting text first."})}}catch(e){console.error("FlowReader: Extraction error:",e),o({type:"EXTRACTION_FAILED",error:e instanceof Error?e.message:"Unknown extraction error"})}return!0}});chrome.runtime.sendMessage({type:"CONTENT_SCRIPT_READY"});
